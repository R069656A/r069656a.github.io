<html>
    <head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title> Resale vs New Launch - WeeKheong Calculator </title>
        <style>
          * { -webkit-box-sizing: border-box;-moz-box-sizing: border-box;box-sizing: border-box; }
            body{font-family:sans-serif;}
            .output {
            font-weight:bold;
            }
            th, td {vertical-align: top;}
            #password_prompt{width:100%;height:100%;left: 0;top: 0;z-index: 8;}
            .report_table {width:100%;}
            .stylish_table2,
            .report_table,.stylish_table { border-collapse: collapse; }
            .report_table td,th {padding:4px;border:1px solid #333;font-size: 16px;}
            .report_table tbody tr:nth-child(odd) td {background-color:#c4c4e7;}
            .report_table tbody tr:nth-child(even) td {background-color:#e7c4e5;}
            .stylish_table2,.stylish_table {border:1px solid #333;width:100%;}
            .stylish_table td { padding:8px; }
            .stylish_table tr:nth-child(odd) td:first-child { background-color:#2155cc;color:#FFF; }
            .stylish_table td:first-child { background-color:#3266cc;color:#FFF; }
            .stylish_table tr:nth-child(odd) td:last-child { background-color:#ccc; }
            .stylish_table tr.positive_r td { background-color:#2e8f60;color:#FFF; }
            .stylish_table tr.negative_r td { background-color:#bc848e; }
            .stylish_table2 tr:nth-child(1) td {background-color:#333;color:#FFF;}
            /* .stylish_table2 td:first-child{background-color:#753c81;color:#FFF;} */
            /* .stylish_table2 tr:nth-child(even) td:first-child{background-color:#813c3c;}
            .stylish_table2 tr:nth-child(even) td:last-child{background-color:#ccc;} */
            .stylish_table2 td { padding:2px;font-size: 16px;border: 1px dotted #333; }
            select,input[type="text"]{font-size:16px;background:none;border:0;width:100%;}
            .container_table > tbody > tr > td { padding:8px; }
            select, input[type="text"]:not(:read-only) {background-color: yellow;}
            @media print{.toHide{display:none;}}
        </style>
        <script>
            function saveInputs() {
                var text_inputs = document.querySelectorAll('input[type="text"]');
                var selects = document.querySelectorAll('select');
                if (window.localStorage) { 
                    for (i = 0; i < text_inputs.length; i++) {
                        localStorage[text_inputs[i].id] = text_inputs[i].value;
                    }

                    for (i = 0; i < selects.length; i++) {
                        localStorage[selects[i].id] = selects[i].value;
                    }
                }
            }

            function updateGrowth ( ) {
                var purchase = getAmount(document.getElementById("purchase").value);
                document.getElementById("vspurchase").value = numberWithCommas(purchase);
                getValues();
            }

            function getValues() {
                //button click gets values from inputs
                var purchase = getAmount(document.getElementById("purchase").value);
                // var balance = getAmount(document.getElementById("principal").value);
                var interestRate = getAmount(document.getElementById("interestRate").value)/100.0;
                var holding = getAmount(document.getElementById("holding_period_years").value) * 12;
                document.getElementById("holding_period_months").innerHTML = holding;
                
                //set the div string
                var div = document.getElementById("Result");
                
                //in case of a re-calc, clear out the div!
                div.innerHTML = "";
                
                var balance = 0.75*purchase; // wk to edit
                var terms = 25 * 12; // wk to edit

                //validate inputs - display error if invalid, otherwise, display table
                var balVal = validateInputs(balance);
                var intrVal = validateInputs(interestRate);

                if (balVal && intrVal) {
                    //Returns div string if inputs are valid
                    div.innerHTML += amort(balance, interestRate, terms, holding);
                    const total_interests = document.getElementsByClassName("total_interest");
                    document.getElementById("resaleBankInterest").value = numberWithCommas(getAmount(total_interests[0].innerHTML)/holding);
                }
                else {
                    //returns error if inputs are invalid
                    div.innerHTML += "Please Check your inputs and retry - invalid values.";
                }
                
                //set the div string
                var div2 = document.getElementById("Result2");
                
                //in case of a re-calc, clear out the div!
                div2.innerHTML = "";
                
                var stage1_1 = amort(purchase*0.05, interestRate, terms, 6, true,["Completion of Foundation",5]);
                div2.innerHTML += stage1_1; // 6 months
                
                var stage1_2 = amort(purchase*0.1
                    +(getAmount(document.querySelector("#result2 .balance6").innerHTML)
                    -getAmount(document.querySelector("#result2 .monthly_principal6").innerHTML))
                    , interestRate, terms-6, 6, 6,["Completion of Reinforced Concrete",10]);
                div2.innerHTML+=stage1_2; // 12 months
                
                var stage2_1 = amort(purchase*0.05
                    +(getAmount(document.querySelector("#result2 .balance12").innerHTML)
                    -getAmount(document.querySelector("#result2 .monthly_principal12").innerHTML))
                    , interestRate, terms-12, 6, 12,["Completion of Brick Walls",5]); // 18 months
                div2.innerHTML+=stage2_1; 
                
                var stage2_2 = amort(purchase*0.05
                    +getAmount(document.querySelector("#result2 .balance18").innerHTML)
                    -getAmount(document.querySelector("#result2 .monthly_principal18").innerHTML)
                    , interestRate, terms-18, 6, 18,["Completion of Ceiling / Roofing",5]); // 24 months
                div2.innerHTML+=stage2_2; 
                
                var stage3_1 = amort(purchase*0.05
                    +getAmount(document.querySelector("#result2 .balance24").innerHTML)
                    -getAmount(document.querySelector("#result2 .monthly_principal24").innerHTML)
                    , interestRate, terms-24, 6, 24,["Completion of Electrical Wiring / Plumbing",5]); // 30 months
                div2.innerHTML+=stage3_1; 
                
                var stage3_2 = amort(purchase*0.05
                    +getAmount(document.querySelector("#result2 .balance30").innerHTML)
                    -getAmount(document.querySelector("#result2 .monthly_principal30").innerHTML)
                    , interestRate, terms-30, 6, 30,["Completion of Roads / Car Parks / Drainage",5]); // 36 months
                div2.innerHTML+=stage3_2; 
                
                var stage4 = amort(purchase*0.25
                    +getAmount(document.querySelector("#result2 .balance36").innerHTML)
                    -getAmount(document.querySelector("#result2 .monthly_principal36").innerHTML)
                    , interestRate, terms-36, 12, 36,["Issuance of Temporary Occupation Permit (TOP)",25]); // 48 months
                div2.innerHTML+=stage4; 
                
                var stage5 = amort(purchase*0.15
                    +getAmount(document.querySelector("#result2 .balance48").innerHTML)
                    -getAmount(document.querySelector("#result2 .monthly_principal48").innerHTML)
                    , interestRate, terms-48, 12, 48,["Certificate of Statutory Completion (CSC)",15]); 
                div2.innerHTML+=stage5; 

                div2.innerHTML = "<h2>Loan Progressive Payment</h2><table class=\"report_table\"><thead><tr><th>Description</th><th>% of purchase price</th><th>Disbursed amt</th><th>Month #</th><th>Balance</th><th>Interest</th><th>Principal</th></tr></thead>" + stage1_1 + stage1_2 + stage2_1 + stage2_2 + stage3_1 + stage3_2 + stage4 + stage5 + "</table>";

                var total_progressive_interest = 0;
                for (i=0;i<holding;i++) {
                    total_progressive_interest += getAmount( document.querySelector("#result2 .monthly_interest"+(i+1)).innerHTML);
                }
                document.getElementById("nlBankInterest").value = numberWithCommas( total_progressive_interest/holding);
                
                document.getElementById("resaleMonthlyTotal").value = numberWithCommas(
                    getAmount(document.getElementById("resaleBankInterest").value) +
                    getAmount(document.getElementById("resaleMCST").value) +
                    getAmount(document.getElementById("resalePropertyTax").value)
                );
                
                document.getElementById("nlMonthlyTotal").value = numberWithCommas(
                    getAmount(document.getElementById("nlBankInterest").value) +
                    getAmount(document.getElementById("nlRental").value)
                );

                document.getElementById("resaleCostTotal").value = numberWithCommas(
                    getAmount(document.getElementById("resaleMonthlyTotal").value) * 
                    getAmount(document.getElementById("holding_period_months").innerHTML) 
                );

                document.getElementById("nlCostTotal").value = numberWithCommas(
                    getAmount(document.getElementById("nlMonthlyTotal").value) * 
                    getAmount(document.getElementById("holding_period_months").innerHTML) 
                );

                let bsd = 0;
                if (purchase <= 180000) {
                    bsd = 0.01*purchase;
                } else if (purchase > 180000 && purchase <= 360000) {
                    bsd = 0.02*purchase - 1800;
                } else if (purchase > 360000 && purchase <= 1000000) {
                    bsd = 0.03*purchase - 5400;
                } else if (purchase > 1000000 && purchase <= 1500000) {
                    bsd = 0.04*purchase - 15400;
                } else if (purchase > 1500000 && purchase <= 3000000) {
                    bsd = 0.05*purchase - 30400;
                } else if (purchase > 3000000) {
                    bsd = 0.06*purchase - 60400;
                }
                bsd = Math.floor(bsd);

                document.getElementById("resaleBSD").value = numberWithCommas(bsd);
                document.getElementById("nlBSD").value = numberWithCommas(bsd);

                var absd_rate = 0;

                var s_property_count = document.getElementById("property_count");
                var s_nationality = document.getElementById("nationality");
                var property_count = s_property_count.value;
                var nationality = s_nationality.value;
                
                if (nationality == "sc") {
                    if (property_count == "2") {
                        absd_rate = 0.2;
                    }
                    if (property_count == "3") {
                        absd_rate = 0.3;
                    }
                }
                
                if (nationality == "spr") {
                    if (property_count == "1") {
                        absd_rate = 0.05;
                    }
                    if (property_count == "2") {
                        absd_rate = 0.3;
                    }
                    if (property_count == "3") {
                        absd_rate = 0.35;
                    }
                }
                
                if (nationality == "for") {
                    absd_rate = 0.6;
                }
                
                document.getElementById("resaleABSD").value = numberWithCommas(absd_rate*purchase);
                document.getElementById("nlABSD").value = numberWithCommas(absd_rate*purchase);

                document.getElementById("resaleBreakEven").value=numberWithCommas(
                    getAmount(document.getElementById("resaleCostTotal").value)+
                    getAmount(document.getElementById("resaleBSD").value)+
                    getAmount(document.getElementById("resaleABSD").value)+
                    getAmount(document.getElementById("resaleRenovation").value) + purchase
                );

                document.getElementById("nlBreakEven").value=numberWithCommas(
                    getAmount(document.getElementById("nlCostTotal").value)+
                    getAmount(document.getElementById("nlBSD").value)+
                    getAmount(document.getElementById("nlABSD").value) + purchase
                );

                document.getElementById("appreciation25").innerHTML = "$" + numberWithCommas(
                    purchase+=0.025*purchase
                )
                document.getElementById("resaleProfit25").innerHTML = numberWithCommas(
                    (getAmount(document.getElementById("appreciation25").innerHTML) - getAmount(document.getElementById("resaleBreakEven").value)) / getAmount(document.getElementById("resaleBreakEven").value) * 100 
                )+"%";
                document.getElementById("nlProfit25").innerHTML = numberWithCommas(
                    (getAmount(document.getElementById("appreciation25").innerHTML) - getAmount(document.getElementById("nlBreakEven").value)) / getAmount(document.getElementById("nlBreakEven").value) * 100 
                )+"%";

                document.getElementById("appreciation5").innerHTML = "$" + numberWithCommas(
                    purchase+=0.05*purchase
                )
                document.getElementById("resaleProfit5").innerHTML = numberWithCommas(
                    (getAmount(document.getElementById("appreciation5").innerHTML) - getAmount(document.getElementById("resaleBreakEven").value)) / getAmount(document.getElementById("resaleBreakEven").value) * 100 
                )+"%";
                document.getElementById("nlProfit5").innerHTML = numberWithCommas(
                    (getAmount(document.getElementById("appreciation5").innerHTML) - getAmount(document.getElementById("nlBreakEven").value)) / getAmount(document.getElementById("nlBreakEven").value) * 100 
                )+"%";

                document.getElementById("appreciation10").innerHTML = "$" + numberWithCommas(
                    purchase+=0.05*purchase
                )
                document.getElementById("resaleProfit10").innerHTML = numberWithCommas(
                    (getAmount(document.getElementById("appreciation10").innerHTML) - getAmount(document.getElementById("resaleBreakEven").value)) / getAmount(document.getElementById("resaleBreakEven").value) * 100 
                )+"%";
                document.getElementById("nlProfit10").innerHTML = numberWithCommas(
                    (getAmount(document.getElementById("appreciation10").innerHTML) - getAmount(document.getElementById("nlBreakEven").value)) / getAmount(document.getElementById("nlBreakEven").value) * 100 
                )+"%";

                document.getElementById("appreciation15").innerHTML = "$" + numberWithCommas(
                    purchase+=0.05*purchase
                )
                document.getElementById("resaleProfit15").innerHTML = numberWithCommas(
                    (getAmount(document.getElementById("appreciation15").innerHTML) - getAmount(document.getElementById("resaleBreakEven").value)) / getAmount(document.getElementById("resaleBreakEven").value) * 100 
                )+"%";
                document.getElementById("nlProfit15").innerHTML = numberWithCommas(
                    (getAmount(document.getElementById("appreciation15").innerHTML) - getAmount(document.getElementById("nlBreakEven").value)) / getAmount(document.getElementById("nlBreakEven").value) * 100 
                )+"%";

                document.getElementById("appreciation20").innerHTML = "$" + numberWithCommas(
                    purchase+=0.05*purchase
                )
                document.getElementById("resaleProfit20").innerHTML = numberWithCommas(
                    (getAmount(document.getElementById("appreciation20").innerHTML) - getAmount(document.getElementById("resaleBreakEven").value)) / getAmount(document.getElementById("resaleBreakEven").value) * 100 
                )+"%";
                document.getElementById("nlProfit20").innerHTML = numberWithCommas(
                    (getAmount(document.getElementById("appreciation20").innerHTML) - getAmount(document.getElementById("nlBreakEven").value)) / getAmount(document.getElementById("nlBreakEven").value) * 100 
                )+"%";

                document.getElementById("appreciation250").innerHTML = "$" + numberWithCommas(
                    purchase+=0.05*purchase
                )
                document.getElementById("resaleProfit250").innerHTML = numberWithCommas(
                    (getAmount(document.getElementById("appreciation250").innerHTML) - getAmount(document.getElementById("resaleBreakEven").value)) / getAmount(document.getElementById("resaleBreakEven").value) * 100 
                )+"%";
                document.getElementById("nlProfit250").innerHTML = numberWithCommas(
                    (getAmount(document.getElementById("appreciation250").innerHTML) - getAmount(document.getElementById("nlBreakEven").value)) / getAmount(document.getElementById("nlBreakEven").value) * 100 
                )+"%";

                document.getElementById("appreciation30").innerHTML = "$" + numberWithCommas(
                    purchase+=0.05*purchase
                )
                document.getElementById("resaleProfit30").innerHTML = numberWithCommas(
                    (getAmount(document.getElementById("appreciation30").innerHTML) - getAmount(document.getElementById("resaleBreakEven").value)) / getAmount(document.getElementById("resaleBreakEven").value) * 100 
                )+"%";
                document.getElementById("nlProfit30").innerHTML = numberWithCommas(
                    (getAmount(document.getElementById("appreciation30").innerHTML) - getAmount(document.getElementById("nlBreakEven").value)) / getAmount(document.getElementById("nlBreakEven").value) * 100 
                )+"%";

                const appreciation_amounts = document.getElementsByClassName("appreciation_amount");
                for (let i = 0; i < appreciation_amounts.length; i++) {
                    if (getAmount(appreciation_amounts[i].innerHTML) < 0){
                        appreciation_amounts[i].style = "color:red";
                    } else {
                        appreciation_amounts[i].style = "color:green";
                    }
                }

                saveInputs();
            }

            /**
             * Amort function:
             * Calculates the necessary elements of the loan using the supplied user input
             * and then displays each months updated amortization schedule on the page
            */
            function amort(balance, interestRate, terms, holding=18, isProgressive=false, description) {
                //Calculate the per month interest rate
                var monthlyRate = interestRate/12;
                
                //Calculate the payment
                var payment = balance * (monthlyRate/(1-Math.pow(
                    1+monthlyRate, -terms)));
                    
                //begin building the return string for the display of the amort table
                var result = "";
                
                if (!isProgressive) {
                    result += "<table class=\"stylish_table\">" +
                        "<tr><td>Loan amount:</td><td> $" + numberWithCommas(balance) +  "</td></tr>" + 
                        "<tr><td>Interest rate:</td><td> " + (interestRate*100).toFixed(2) +  "%</td></tr>" +
                        "<tr><td>Number of months:</td><td> " + terms + "</td></tr>" +
                        "<tr><td>Monthly payment:</td><td> $" + numberWithCommas(payment) + "</td></tr>" +
                        "<tr><td>Total paid:</td><td> $" + numberWithCommas(payment * terms) + "</td></tr>";
                }
                    
                var holdingInterest = 0;
                var holdingPrincipal = 0;

                //add header row for table to return string
                var result2 = "";
                
                if (!isProgressive) {
                    result2 += "<table class=\"report_table\"><thead><tr><th>Month #</th><th>Balance</th>" + 
                        "<th>Interest</th><th>Principal</th></tr></thead>";
                }
                
                /**
                 * Loop that calculates the monthly Loan amortization amounts then adds 
                 * them to the return string 
                 */
                for (var count = 0; count < terms; ++count) { 
                    //in-loop interest amount holder
                    var interest = 0;
                    
                    //in-loop monthly principal amount holder
                    var monthlyPrincipal = 0;

                    //start a new table row on each loop iteration
                    result2 += "<tr align=center>";
                    
                    if (isProgressive && count == 0) {
                        result2 += '<td style="vertical-align: middle;" rowspan="'+holding+'">'+description[0]+'</td>';
                        result2 += '<td style="vertical-align: middle;" rowspan="'+holding+'">'+description[1]+'%</td>';
                        result2 += '<td style="vertical-align: middle;" rowspan="'+holding+'">$'+numberWithCommas(parseInt( description[1])/100*getAmount(document.getElementById("purchase").value))+'</td>';
                    }

                    var monthNumber = count + 1;
                    if (typeof isProgressive === 'number') {
                        monthNumber += isProgressive;
                    }

                    //display the month number in col 1 using the loop count variable
                    result2 += "<td>" + monthNumber + "</td>";
                    
                    
                    //code for displaying in loop balance
                    result2 += "<td> $<span class=\"balance"+monthNumber+"\">" + numberWithCommas( balance) + "<span></td>";
                    
                    //calc the in-loop interest amount and display
                    interest = balance * monthlyRate;
                    result2 += "<td> $<span class=\"monthly_interest"+monthNumber+"\">" + numberWithCommas(interest) + "</span></td>";
                    
                    //calc the in-loop monthly principal and display
                    monthlyPrincipal = payment - interest;
                    result2 += "<td> $<span class=\"monthly_principal"+monthNumber+"\">" + numberWithCommas(monthlyPrincipal) + "</span></td>";
                    
                    //end the table row on each iteration of the loop	
                    result2 += "</tr>";
                    
                    //update the balance for each loop iteration
                    balance = balance - monthlyPrincipal;	
                    
                    if (count<holding){
                        holdingInterest += interest;
                        holdingPrincipal += monthlyPrincipal;
                    }

                    if (isProgressive && count == holding-1) {
                        break;
                    }
                }
                
                if (!isProgressive) {
                    //Final piece added to return string before returning it - closes the table
                    result2 += "</table>";
                }

                if (!isProgressive) {
                result += "<tr><td>Interest ("+holding+" months):</td><td> $<span class=\"total_interest\">" + numberWithCommas(holdingInterest) + "</span></td></tr>"+
                "<tr><td>Principal ("+holding+" months):</td><td> $<span class=\"total_principal\">" + numberWithCommas(holdingPrincipal) + "</span></td></tr>"+
                    "</table><br/>";
                }
                
                //returns the concatenated string to the page
                return result + result2;
            }

            function getAmountElement(id) {
                return getAmount(document.getElementById(id).value);
            }

            const getAmount = (amount) => {
                let parsedVal = parseFloat(amount.replace(/[$,]/g, ""));
                if (parsedVal) {
                return parsedVal;
                }
                else { return 0; }
            }

            function numberWithCommas(x) {
                x=x.toFixed(2);
                var parts = x.toString().split(".");
                parts[0] = parts[0].replace(/\B(?=(\d{3})+(?!\d))/g, ",");
                return parts.join(".");

                return x;
            }

            function validateInputs(value) {
                //some code here to validate inputs
                if ((value == null) || (value == "")) {
                    return false;
                }
                else {
                    return true;
                }
            }
            function password_prompt (label_message, button_message, arg3) {

                if (typeof label_message !== "string") var label_message = "Password:";
                if (typeof button_message !== "string") var button_message = "Submit";
                if (typeof arg3 === "function") {
                    var callback = arg3;
                }
                if (typeof callback !== "function") var callback = function(password){};

                var submit = function() {
                    var date = new Date();
                    localStorage.expiry = date.setDate(date.getDate() + 1);

                    callback(input.value);
                    document.body.removeChild(div);
                    window.removeEventListener("resize", resize, false);
                };
                var resize = function() {
                    div.style.left = ((window.innerWidth / 2) - (width / 2)) + "px";
                    div.style.top = ((window.innerHeight / 2) - (height / 2)) + "px";
                };

                var div = document.createElement("div");
                div.id = "password_prompt";
                div.style.background = "white";
                div.style.color = "black";
                div.style.padding = "16px";
                div.style.position = "fixed";

                var heading = document.createElement("h1");
                heading.id = "password_prompt_heading";
                heading.innerHTML = "Resale vs New Launch";
                div.appendChild(heading);

                var label = document.createElement("label");
                label.id = "password_prompt_label";
                label.innerHTML = label_message;
                label.for = "password_prompt_input";
                div.appendChild(label);

                div.appendChild(document.createElement("br"));

                var input = document.createElement("input");
                input.id = "password_prompt_input";
                input.type = "password";
                input.addEventListener("keyup", function(e) {
                    if (event.keyCode == 13) submit();
                }, false);
                div.appendChild(input);

                div.appendChild(document.createElement("br"));
                div.appendChild(document.createElement("br"));

                var button = document.createElement("button");
                button.innerHTML = button_message;
                button.addEventListener("click", submit, false);
                div.appendChild(button);

                document.body.appendChild(div);
                window.addEventListener("resize", resize, false);
            };

        </script>
    </head>
    <body>
        <fieldset>
            <legend>Resale vs New Launch</legend>
            <table style="border-collapse: collapse;">
                <tr>
                    <td>
                        <table class="stylish_table2" style="table-layout:fixed;">
                        <tr>
                            <td style="text-align:center;height: 60px;vertical-align: middle;">Resale</td>
                            <td style="text-align:center;height: 60px;vertical-align: middle;">VS</td>
                            <td style="text-align:center;height: 60px;vertical-align: middle;">New Launch</td>
                        </tr>
                        <tr>
                            <td><input type="text" style="text-align:center" id="purchase" onchange="updateGrowth()"/></td>
                            <td style="text-align:center"><label for="purchase"><b>Purchase Price</b></label></td>
                            <td><input type="text" id="vspurchase" style="text-align:center" readonly/></td>
                        </tr>
                        <tr>
                            <td style="vertical-align: middle;"><input type="text" style="text-align:center" id="resaleBankInterest" readonly /></td>
                            <td style="text-align:center">
                                <label ><b>Bank Interest (%)</b></label>
                                <input id="interestRate" style="text-align:center" type="text" value="2.6"/>
                            </td>
                            <td style="vertical-align: middle;"><input type="text" style="text-align:center" id="nlBankInterest" readonly /></td>
                        </tr>
                        <tr>
                            <td><input type="text" style="text-align:center" id="resaleMCST" onchange="updateGrowth()" value="0.00" /></td>
                            <td style="text-align:center"><label ><b>MCST</b></label></td>
                            <td><input type="text" style="text-align:center" value="0.00" readonly /></td>
                        </tr>
                        <tr>
                            <td><input type="text" style="text-align:center" value="0.00" readonly /></td>
                            <td style="text-align:center"><label ><b>Rental</b></label></td>
                            <td><input type="text" style="text-align:center" id="nlRental" onchange="updateGrowth()" value="0.00" /></td>
                        </tr>
                        <tr>
                            <td><input type="text" style="text-align:center" id="resalePropertyTax" onchange="updateGrowth()" value="0.00" /></td>
                            <td style="text-align:center"><label ><b>Property Tax</b></label></td>
                            <td><input type="text" style="text-align:center" value="0.00" readonly /></td>
                        </tr>
                        <tr>
                            <td><input type="text" style="text-align:center" id="resaleMonthlyTotal" readonly value="0.00" /></td>
                            <td style="text-align:center"><label ><b>Total Cost Per Month</b></label></td>
                            <td><input type="text" style="text-align:center" id="nlMonthlyTotal" readonly value="0.00" /></td>
                        </tr>
                        <tr>
                            <td style="text-align:center"><label for="holding_period_years"><b>Holding Period (3/4/5 years)</b></label></td>
                            <td>
                                <select id="holding_period_years" style="text-align: center;">
                                    <option>3 years</option>
                                    <option>4 years</option>
                                    <option>5 years</option>
                                </select>
                            </td>
                            <td><div style="text-align: center;"><span id="holding_period_months">36</span> months</div></td>
                        </tr>
                        <tr>
                            <td><input type="text" style="text-align:center" id="resaleCostTotal" readonly value="0.00" /></td>
                            <td style="text-align:center"><label ><b>Total Cost</b></label></td>
                            <td><input type="text" style="text-align:center" id="nlCostTotal" readonly value="0.00" /></td>
                        </tr>
                        <tr>
                            <td><input type="text" style="text-align:center" id="resaleBSD" readonly value="0.00" /></td>
                            <td style="text-align:center"><label ><b>BSD</b></label></td>
                            <td><input type="text" style="text-align:center" id="nlBSD" readonly value="0.00" /></td>
                        </tr>
                        <tr>
                            <td><input type="text" style="text-align:center" id="resaleABSD" readonly value="0.00" /></td>
                            <td style="text-align:center"><label ><b>ABSD</b></label></td>
                            <td><input type="text" style="text-align:center" id="nlABSD" readonly value="0.00" /></td>
                        </tr>
                        <tr>
                            <td><input type="text" style="text-align:center" id="resaleRenovation" onchange="updateGrowth()" value="0.00" /></td>
                            <td style="text-align:center"><label ><b>Renovation</b></label></td>
                            <td><input type="text" style="text-align:center" readonly value="0.00" /></td>
                        </tr>
                        <tr>
                            <td><input type="text" style="text-align:center" id="resaleBreakEven" readonly value="0.00" /></td>
                            <td style="text-align:center"><label ><b>Breakeven Price</b></label></td>
                            <td><input type="text" style="text-align:center" id="nlBreakEven" readonly value="0.00" /></td>
                        </tr>
                        
                    </table>
                    <br/>
                    <table style="table-layout: fixed;" class="stylish_table2">
                        <tr><td colspan="3" style="text-align: center;height: 60px;vertical-align: middle;"> Assume Appreciation</td></tr>
                        <tr>
                            <td style="text-align: center;vertical-align: middle;"><div id="resaleProfit25" class="appreciation_amount"></div></td>
                            <td style="text-align: center;vertical-align: middle;">2.5%<div id="appreciation25"></div></td>
                            <td style="text-align: center;vertical-align: middle;"><div id="nlProfit25"class="appreciation_amount"></div></td>
                        </tr>
                        <tr>
                            <td style="text-align: center;vertical-align: middle;"><div id="resaleProfit5"class="appreciation_amount"></div></td>
                            <td style="text-align: center;vertical-align: middle;">5%<div id="appreciation5"></div></td>
                            <td style="text-align: center;vertical-align: middle;"><div id="nlProfit5"class="appreciation_amount"></div></td>
                        </tr>
                        <tr>
                            <td style="text-align: center;vertical-align: middle;"><div id="resaleProfit10"class="appreciation_amount"></div></td>
                            <td style="text-align: center;vertical-align: middle;">10%<div id="appreciation10"></div></td>
                            <td style="text-align: center;vertical-align: middle;"><div id="nlProfit10"class="appreciation_amount"></div></td>
                        </tr>
                        <tr>
                            <td style="text-align: center;vertical-align: middle;"><div id="resaleProfit15"class="appreciation_amount"></div></td>
                            <td style="text-align: center;vertical-align: middle;">15%<div id="appreciation15"></div></td>
                            <td style="text-align: center;vertical-align: middle;"><div id="nlProfit15"class="appreciation_amount"></div></td>
                        </tr>
                        <tr>
                            <td style="text-align: center;vertical-align: middle;"><div id="resaleProfit20"class="appreciation_amount"></div></td>
                            <td style="text-align: center;vertical-align: middle;">20%<div id="appreciation20"></div></td>
                            <td style="text-align: center;vertical-align: middle;"><div id="nlProfit20"class="appreciation_amount"></div></td>
                        </tr>
                        <tr>
                            <td style="text-align: center;vertical-align: middle;"><div id="resaleProfit250"class="appreciation_amount"></div></td>
                            <td style="text-align: center;vertical-align: middle;">25%<div id="appreciation250"></div></td>
                            <td style="text-align: center;vertical-align: middle;"><div id="nlProfit250"class="appreciation_amount"></div></td>
                        </tr>
                        <tr>
                            <td style="text-align: center;vertical-align: middle;"><div id="resaleProfit30"class="appreciation_amount"></div></td>
                            <td style="text-align: center;vertical-align: middle;">30%<div id="appreciation30"></div></td>
                            <td style="text-align: center;vertical-align: middle;"><div id="nlProfit30"class="appreciation_amount"></div></td>
                        </tr>
                    </table>
                </td>
                    <td style="padding-left:20px;">
                        <table style="width: 280px;">
                            <tr>
                                <td>Property Count</td>
                                <td>
                                    <select id="property_count" onchange="updateGrowth()">
                                        <option value="1">1st</option>
                                        <option value="2">2nd</option>
                                        <option value="3">3rd and subsequent</option>
                                    </select>
                                </td>
                            </tr>
                            <tr>
                                <td>Nationality</td>
                                <td>
                                    <select id="nationality" onchange="updateGrowth()">
                                        <option value="sc">SC</option>
                                        <option value="spr">SPR</option>
                                        <option value="for">Foreigner</option>
                                    </select>
                                </td>
                            </tr>
                        </table>
                        
                        <input type="button" value="Calculate" class="toHide" style="margin-top: 20px;font-size: 16px;background: #0a4545;color: #FFF;border: 0;padding: 10px;" onclick="getValues()" />
                    </td>
                </tr>
            </table>
            
        </fieldset>
        
        <fieldset>
            <legend>Outputs</legend>
            <table class="container_table" style="width:100%;/*table-layout: fixed;*/border-collapse: collapse;">
                <tr>
                    <td><div id="Result"></div></td>
                    <td><div id="Result2"></div></td>
                    <!-- <td><div id="summary"></div></td> -->
                </tr>
            </table>
        </fieldset>	
        <script>
            let correct_password = "Gemini?";
            if (localStorage.expiry === undefined || new Date().getTime() > localStorage.expiry) {
              password_prompt("Please enter your password:", "Submit", function(pwd) {
                  if (pwd != correct_password) {
                    alert("Wrong password!");
                    localStorage.expiry = 0;
                    location.reload();
                    return;
                  }
              });
            }

            window.onload = function() {
                if (window.localStorage) {
                    for (var k in localStorage){
                        if (document.getElementById(k)){
                        document.getElementById(k).value = localStorage[k];
                        }
                    }
                    updateGrowth();
                    // getValues();
                }
            }
        </script>
    </body>
</html>